<!-- {"bootstrap": "pages/advert-edit/boot"} -->

@H('page-header', 'Ввод предложения')

<form class="form-horizontal">
  @field(input, 'name', 'Название')
  @field(levelSelect, 'level', 'Класс')
  @field(textarea, 'description', 'Описание')
  @advert('rent', 'Аренда')
  @advert('sale', 'Продажа')
  <div class="form-actions">
    <button class="btn btn-primary" type="submit" data-ports="css-disabled: hasError, attrToggle-disabled: hasError">Сохрaнить</button>
    <button class="btn" type="reset">Отмена</button>
  </div>
</form>

<%function advert (type, typeName) {
  field(checkbox, type + '.available', typeName)%>
  
  <div class="fade collapse" data-ports="css-in: #type#.available">
    @field(function (name) {
      <input type=text data-ports="value: #=name#|range" class=span2 /> 
      <span class="help-inline">$/м<sup>2</sup>/год</span>
    @}, type + '.price', 'Цена')

    @field(function (name) {
      <input type=text data-ports="value: #=name#|range" class=span2 />
      <span class="help-inline">м<sup>2</sup></span>
    @}, type + '.space', 'Площадь')
  </div>
@}

@function levelSelect (name) {
  <select data-ports="value: #=name#">
    <option value="not specified">Не указан</option>
  	<option value="A">A</option>
  	<option value="B+">B+</option>
  	<option value="B">B</option>
  	<option value="C">C</option>
  </select>
@}

@function input (name) {
  <input data-ports="value: #=name#" type="text"/>
@}

@function textarea (name) {
  <textarea data-ports="value: #=name#" rows="4" class="span5"></textarea>
@}

@function checkbox (name) {
  <input data-ports="value: #=name#" type="checkbox" />
@}
  
@function field (content, name, label) {
  <div class="control-group" data-ports="cssValue: #=name#.msg.type">
    <label class="control-label">#=label#</label>
    <div class="controls">
      @content(name, label)
      <span class="help-inline" data-ports="text: #=name#.msg.text"></span>
    </div>
  </div>
@}
