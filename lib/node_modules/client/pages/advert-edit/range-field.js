var range = require('range');
var Field = require('./field');
var P = require('ports');

module.exports = function Range () {
    var field;
    var prop = P.property();
    field = Field((P.conversionExit(
        function output (val) {
            return val;
        },
        function input (val) {
            if (typeof val == 'string') {
                try {
                    val = range.parse(val);
                }
                catch (e) {
                    field.msg('error', e.message);
                    throw e;
                }
            }
            field.msg.clear();
            return val;
        }
    ))(prop));
    return field;
}
