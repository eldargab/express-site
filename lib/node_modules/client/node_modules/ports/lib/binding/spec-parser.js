module.exports = function parse (spec) {
    return spec.split(/,/g).map(function (binding) {
        var b = binding.split(/:/g);
        if (b.length != 2) return;

        var path = b[1].trim();
        var p = b[0].split(/\|/g);
        var port = p[0].trim().split(/\-/);
        var type = port[0];
        var param = port[1];
        if (param) param = param.trim();
        var filters = p.slice(1).map(function (s) { return s.trim() });

        return {
            type: type, 
            param: param, 
            path: path, 
            filters: filters
        }
    }).filter(function (p) { return p != null });
}
