var should = require('should');
var P = require('..');

function property () {
    var _val;
    return P.port(
        function setter (val) { _val = val },
        function getter () {
            return _val;
        }
    );
}

describe('setJSON()', function () {
    it('test', function () {
        var obj = {
            a: property(),
            subobj: {
                b: property()
            }
        }

        var json =  {
            a: 'a',
            subobj: {
                b: 'b',
                c: 'c'
            }
        }

        P.setJSON(obj, json);

        obj.a().should.equal('a');
        obj.subobj.b().should.equal('b');
        obj.subobj.should.have.property('c').equal('c');
    });
});

